{"schemaVersion":{"major":0,"patch":0,"minor":3},"kind":"article","abstract":[{"type":"text","text":"Synchronize and process SDK data in background when the application is not active"}],"metadata":{"title":"Background Syncing","modules":[{"name":"AbloyCuBeMobileSDK"}],"roleHeading":"Article","role":"article"},"hierarchy":{"paths":[["doc:\/\/com.abloy.AbloyMobileSDK\/documentation\/AbloyCuBeMobileSDK"]]},"primaryContentSections":[{"kind":"content","content":[{"text":"Overview","type":"heading","level":2,"anchor":"Overview"},{"inlineContent":[{"text":"AbloyCuBeMobileSDK uses ","type":"text"},{"type":"reference","isActive":true,"identifier":"https:\/\/developer.apple.com\/documentation\/backgroundtasks"},{"text":" to perform certain","type":"text"},{"text":" ","type":"text"},{"text":"operations in background to keep SDK content up to date. For example, if a network request fails, SDK schedules the","type":"text"},{"text":" ","type":"text"},{"text":"failed request and tries to execute it later when app is not active.","type":"text"},{"text":" ","type":"text"},{"text":"It is recommended to enable background syncing to improve SDK performance.","type":"text"}],"type":"paragraph"},{"type":"aside","style":"important","name":"Important","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":""},{"type":"text","text":" "},{"type":"text","text":"In order to execute background processes, following conditions should be met:"}]},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"An active internet connection."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"code":"BackgroundAppRefresh","type":"codeVoice"},{"text":" should be enabled in phone settings.","type":"text"}]}]}],"type":"unorderedList"}]},{"type":"aside","style":"important","name":"Important","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":""},{"type":"text","text":" "},{"type":"text","text":"OS maintains how the background processes are executed. There is no fixed schedule of running these processes. It is"},{"type":"text","text":" "},{"type":"text","text":"possible that processes do not run at all if system doesn’t allow it."}]}]},{"text":"How to enable background syncing","type":"heading","level":3,"anchor":"How-to-enable-background-syncing"},{"type":"orderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"In Signing & Capabilities tab of app’s target, add Background Modes capability and select Background processing mode."}]}]}]},{"inlineContent":[{"identifier":"BackgroundModes.png","type":"image"}],"type":"paragraph"},{"start":2,"type":"orderedList","items":[{"content":[{"inlineContent":[{"text":"Add ","type":"text"},{"identifier":"https:\/\/developer.apple.com\/documentation\/bundleresources\/information_property_list\/bgtaskschedulerpermittedidentifiers","isActive":true,"type":"reference"},{"text":" in app’s info.plist file and add task identifier.","type":"text"},{"text":" ","type":"text"},{"text":"Your info.plist should look like this:","type":"text"}],"type":"paragraph"}]}]},{"inlineContent":[{"identifier":"BackgroundModesInfoPlist.png","type":"image"}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"Following task identifier must be used to register background task:"}],"type":"paragraph"},{"code":["com.abloy.AbloyMobileSDK.keyless-sync"],"type":"codeListing","syntax":null},{"start":3,"type":"orderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Background syncing must be enabled before the app finishes launching. For example, ","type":"text"},{"isActive":true,"type":"reference","identifier":"doc:\/\/com.abloy.AbloyMobileSDK\/documentation\/AbloyCuBeMobileSDK\/BackgroundSyncEnabling\/enableBackgroundSync()"},{"text":" should be called in app’s AppDelegate","type":"text"},{"text":" ","type":"text"},{"isActive":true,"type":"reference","identifier":"https:\/\/developer.apple.com\/documentation\/uikit\/uiapplicationdelegate\/1622921-application"},{"text":" method.","type":"text"},{"text":" ","type":"text"},{"text":"Enabling background syncing will fail if called after app startup is finished.","type":"text"}]}]}]},{"code":["import AbloyCuBeMobileSDK","","func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]? = nil) -> Bool {","    let isRegistered = AbloyMobileSDK.shared.enableBackgroundSync()","    print(\"Task registered successfully\", isRegistered)","    return true","}"],"type":"codeListing","syntax":"swift"},{"text":"Further Reading","type":"heading","level":2,"anchor":"Further-Reading"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"isActive":true,"type":"reference","identifier":"https:\/\/developer.apple.com\/documentation\/uikit\/app_and_environment\/scenes\/preparing_your_ui_to_run_in_the_background\/using_background_tasks_to_update_your_app"}],"type":"paragraph"}]}]}]}],"variants":[{"paths":["\/documentation\/abloycubemobilesdk\/backgroundsyncing"],"traits":[{"interfaceLanguage":"swift"}]}],"seeAlsoSections":[{"title":"Background Syncing","anchor":"Background-Syncing","identifiers":["doc:\/\/com.abloy.AbloyMobileSDK\/documentation\/AbloyCuBeMobileSDK\/BackgroundSyncEnabling\/enableBackgroundSync()"],"generated":true}],"sections":[],"identifier":{"url":"doc:\/\/com.abloy.AbloyMobileSDK\/documentation\/AbloyCuBeMobileSDK\/BackgroundSyncing","interfaceLanguage":"swift"},"references":{"doc://com.abloy.AbloyMobileSDK/documentation/AbloyCuBeMobileSDK/BackgroundSyncEnabling/enableBackgroundSync()":{"identifier":"doc:\/\/com.abloy.AbloyMobileSDK\/documentation\/AbloyCuBeMobileSDK\/BackgroundSyncEnabling\/enableBackgroundSync()","title":"enableBackgroundSync()","abstract":[{"type":"text","text":"Registers and schedules a background process to keep SDK content up to date"}],"fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"enableBackgroundSync"},{"kind":"text","text":"() -> "},{"kind":"typeIdentifier","text":"Bool","preciseIdentifier":"s:Sb"}],"type":"topic","kind":"symbol","required":true,"role":"symbol","url":"\/documentation\/abloycubemobilesdk\/backgroundsyncenabling\/enablebackgroundsync()"},"https://developer.apple.com/documentation/backgroundtasks":{"title":"BackgroundTasks","identifier":"https:\/\/developer.apple.com\/documentation\/backgroundtasks","titleInlineContent":[{"text":"BackgroundTasks","type":"text"}],"url":"https:\/\/developer.apple.com\/documentation\/backgroundtasks","type":"link"},"BackgroundModesInfoPlist.png":{"identifier":"BackgroundModesInfoPlist.png","alt":"BackgroundModesInfoPlist","variants":[{"url":"\/images\/com.abloy.AbloyMobileSDK\/BackgroundModesInfoPlist.png","traits":["1x","light"]}],"type":"image"},"https://developer.apple.com/documentation/uikit/uiapplicationdelegate/1622921-application":{"title":"(_:didFinishLaunchingWithOptions:)","identifier":"https:\/\/developer.apple.com\/documentation\/uikit\/uiapplicationdelegate\/1622921-application","titleInlineContent":[{"text":"(_:didFinishLaunchingWithOptions:)","type":"text"}],"url":"https:\/\/developer.apple.com\/documentation\/uikit\/uiapplicationdelegate\/1622921-application","type":"link"},"https://developer.apple.com/documentation/bundleresources/information_property_list/bgtaskschedulerpermittedidentifiers":{"title":"BGTaskSchedulerPermittedIdentifiers","identifier":"https:\/\/developer.apple.com\/documentation\/bundleresources\/information_property_list\/bgtaskschedulerpermittedidentifiers","titleInlineContent":[{"type":"text","text":"BGTaskSchedulerPermittedIdentifiers"}],"url":"https:\/\/developer.apple.com\/documentation\/bundleresources\/information_property_list\/bgtaskschedulerpermittedidentifiers","type":"link"},"doc://com.abloy.AbloyMobileSDK/documentation/AbloyCuBeMobileSDK":{"abstract":[{"type":"text","text":"Control Abloy locking devices from within your app."}],"title":"AbloyCuBeMobileSDK","kind":"symbol","type":"topic","identifier":"doc:\/\/com.abloy.AbloyMobileSDK\/documentation\/AbloyCuBeMobileSDK","role":"collection","url":"\/documentation\/abloycubemobilesdk"},"BackgroundModes.png":{"identifier":"BackgroundModes.png","alt":"BackgroundModes","variants":[{"traits":["1x","light"],"url":"\/images\/com.abloy.AbloyMobileSDK\/BackgroundModes.png"}],"type":"image"},"https://developer.apple.com/documentation/uikit/app_and_environment/scenes/preparing_your_ui_to_run_in_the_background/using_background_tasks_to_update_your_app":{"title":"Using background tasks to update your app","identifier":"https:\/\/developer.apple.com\/documentation\/uikit\/app_and_environment\/scenes\/preparing_your_ui_to_run_in_the_background\/using_background_tasks_to_update_your_app","titleInlineContent":[{"type":"text","text":"Using background tasks to update your app"}],"url":"https:\/\/developer.apple.com\/documentation\/uikit\/app_and_environment\/scenes\/preparing_your_ui_to_run_in_the_background\/using_background_tasks_to_update_your_app","type":"link"}}}