{"primaryContentSections":[{"content":[{"anchor":"Overview","level":2,"type":"heading","text":"Overview"},{"inlineContent":[{"text":"The Abloy Keyless solution uses asymmetric cryptography to secure the communication between locking devices and mobile","type":"text"},{"text":" ","type":"text"},{"text":"devices. Each locking device has its of own certificate for establishing this secure communication. The certificates","type":"text"},{"text":" ","type":"text"},{"text":"also have an expiration date. Locking devices with expired certificates are inoperable and are considered untrustworthy","type":"text"},{"text":" ","type":"text"},{"text":"for the rest of the Keyless system.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"In order to keep locking devices operational and trustworthy, their certificates need to be updated."},{"type":"text","text":" "},{"type":"text","text":"Update is performed automatically in the background by the Abloy Keyless Mobile SDK. It is worth to note that"},{"type":"text","text":" "},{"type":"text","text":"any mobile device user connecting to a lock may start the update process at any given time."}],"type":"paragraph"},{"name":"Important","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":""},{"type":"text","text":" "},{"type":"text","text":"This process happens very rarely, approximately once a year. No action from the mobile app using the SDK is required."}]}],"type":"aside","style":"important"},{"inlineContent":[{"type":"text","text":"Current status of the locking device certificate is checked when performing lock connection."},{"type":"text","text":" "},{"type":"text","text":"If the certificate needs to be updated, new certificate will be fetched and installed to the"},{"type":"text","text":" "},{"type":"text","text":"locking device. During the update process, the locking device will reboot and reconnect after the new"},{"type":"text","text":" "},{"type":"text","text":"certificate is installed to the locking device."}],"type":"paragraph"},{"anchor":"Discovered-lock-and-certificate-state","level":2,"type":"heading","text":"Discovered lock and certificate state"},{"inlineContent":[{"type":"text","text":"SDK integrators can determine whether update process will happen on next locking device connection from the"},{"type":"text","text":" "},{"type":"text","text":"DiscoveredLockâ€™s "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.abloy.AbloyMobileSDK\/documentation\/AbloyCuBeMobileSDK\/DiscoveredLock\/certificateState"},{"type":"text","text":". If the state is either "},{"overridingTitleInlineContent":[{"code":"pending","type":"codeVoice"}],"type":"reference","isActive":true,"identifier":"doc:\/\/com.abloy.AbloyMobileSDK\/documentation\/AbloyCuBeMobileSDK\/CertificateState\/pending","overridingTitle":"pending"},{"type":"text","text":","},{"type":"text","text":" "},{"overridingTitleInlineContent":[{"type":"codeVoice","code":"issuing"}],"type":"reference","isActive":true,"identifier":"doc:\/\/com.abloy.AbloyMobileSDK\/documentation\/AbloyCuBeMobileSDK\/CertificateState\/issuing","overridingTitle":"issuing"},{"type":"text","text":" or "},{"overridingTitleInlineContent":[{"code":"readyForInstall","type":"codeVoice"}],"type":"reference","isActive":true,"identifier":"doc:\/\/com.abloy.AbloyMobileSDK\/documentation\/AbloyCuBeMobileSDK\/CertificateState\/readyForInstall","overridingTitle":"readyForInstall"},{"type":"text","text":", the next"},{"type":"text","text":" "},{"type":"text","text":"connection will start the certificate updating process."}],"type":"paragraph"},{"anchor":"How-to-listen-for-certificate-update-events","level":2,"type":"heading","text":"How to listen for certificate update events"},{"inlineContent":[{"type":"text","text":"Certificate update events of the connected locking device can be listened by"},{"type":"text","text":" "},{"type":"text","text":"calling "},{"type":"reference","identifier":"doc:\/\/com.abloy.AbloyMobileSDK\/documentation\/AbloyCuBeMobileSDK\/LockCertificateEventStreaming\/getLockCertificateEvents()","isActive":true},{"type":"text","text":" API. These update events can be used to convey"},{"type":"text","text":" "},{"type":"text","text":"information to end users, for example update app UI based on events. When there is no ongoing update process,"},{"type":"text","text":" "},{"type":"text","text":"events will not be emitted."}],"type":"paragraph"},{"name":"Tip","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":""},{"type":"text","text":" "},{"type":"text","text":"Sample code and additional documentation can be found "},{"type":"reference","identifier":"doc:\/\/com.abloy.AbloyMobileSDK\/documentation\/AbloyCuBeMobileSDK\/LockCertificateEventStreaming\/getLockCertificateEvents()","isActive":true,"overridingTitle":"here","overridingTitleInlineContent":[{"text":"here","type":"text"}]}]}],"type":"aside","style":"tip"},{"anchor":"Request-queued-state","level":2,"type":"heading","text":"Request queued state"},{"inlineContent":[{"text":"Certificate update process requires internet connection. If internet connection is not available or network","type":"text"},{"text":" ","type":"text"},{"text":"error occurs, certificate update will end up in ","type":"text"},{"isActive":true,"identifier":"doc:\/\/com.abloy.AbloyMobileSDK\/documentation\/AbloyCuBeMobileSDK\/LockingDeviceCertificateStateChange\/requestQueued","type":"reference"},{"text":" -state.","type":"text"},{"text":" ","type":"text"},{"text":"Certificate update will be tried again when connecting to the locking device next time.","type":"text"}],"type":"paragraph"},{"name":"Important","content":[{"inlineContent":[{"type":"text","text":""},{"type":"text","text":" "},{"type":"text","text":"In case the locking device firmware version does not support update, the SDK will broadcast a"},{"type":"text","text":" "},{"type":"reference","identifier":"doc:\/\/com.abloy.AbloyMobileSDK\/documentation\/AbloyCuBeMobileSDK\/LockingDeviceCertificateStateChange\/certificateUpdateNotSupported","isActive":true},{"type":"text","text":" event. Certificate update process will not start"},{"type":"text","text":" "},{"type":"text","text":"if the firmware does not support it."}],"type":"paragraph"}],"type":"aside","style":"important"},{"name":"Note","content":[{"type":"paragraph","inlineContent":[{"text":"","type":"text"},{"text":" ","type":"text"},{"text":"If internet connection is not available during the certificate update process, it is possible to","type":"text"},{"text":" ","type":"text"},{"text":"try to request the certificate in background when app is not active and the mobile device","type":"text"},{"text":" ","type":"text"},{"text":"is connected to the internet by ","type":"text"},{"isActive":true,"overridingTitle":"enabling background syncing","identifier":"doc:\/\/com.abloy.AbloyMobileSDK\/documentation\/AbloyCuBeMobileSDK\/BackgroundSyncing","type":"reference","overridingTitleInlineContent":[{"type":"text","text":"enabling background syncing"}]},{"text":".","type":"text"}]}],"type":"aside","style":"note"},{"anchor":"Further-Reading","level":2,"type":"heading","text":"Further Reading"},{"items":["doc:\/\/com.abloy.AbloyMobileSDK\/documentation\/AbloyCuBeMobileSDK\/Connecting","doc:\/\/com.abloy.AbloyMobileSDK\/documentation\/AbloyCuBeMobileSDK\/DiscoveredLock","doc:\/\/com.abloy.AbloyMobileSDK\/documentation\/AbloyCuBeMobileSDK\/BackgroundSyncing"],"type":"links","style":"list"}],"kind":"content"}],"hierarchy":{"paths":[["doc:\/\/com.abloy.AbloyMobileSDK\/documentation\/AbloyCuBeMobileSDK"]]},"metadata":{"roleHeading":"Article","modules":[{"name":"AbloyCuBeMobileSDK"}],"role":"article","title":"Certificate Updating"},"sections":[],"abstract":[{"type":"text","text":"Update the certificate of the locking device."}],"schemaVersion":{"minor":3,"patch":0,"major":0},"seeAlsoSections":[{"identifiers":["doc:\/\/com.abloy.AbloyMobileSDK\/documentation\/AbloyCuBeMobileSDK\/LockCertificateEventStreaming\/getLockCertificateEvents()","doc:\/\/com.abloy.AbloyMobileSDK\/documentation\/AbloyCuBeMobileSDK\/LockingDeviceCertificateEvent"],"title":"Locking Device Certificate Updates","generated":true,"anchor":"Locking-Device-Certificate-Updates"}],"variants":[{"paths":["\/documentation\/abloycubemobilesdk\/certificateupdating"],"traits":[{"interfaceLanguage":"swift"}]}],"kind":"article","identifier":{"interfaceLanguage":"swift","url":"doc:\/\/com.abloy.AbloyMobileSDK\/documentation\/AbloyCuBeMobileSDK\/CertificateUpdating"},"references":{"doc://com.abloy.AbloyMobileSDK/documentation/AbloyCuBeMobileSDK/CertificateState/pending":{"url":"\/documentation\/abloycubemobilesdk\/certificatestate\/pending","abstract":[{"type":"text","text":"Lock certificate will expire soon and a new certificate will be requested next time the locking"},{"type":"text","text":" "},{"type":"text","text":"device is connected"}],"kind":"symbol","identifier":"doc:\/\/com.abloy.AbloyMobileSDK\/documentation\/AbloyCuBeMobileSDK\/CertificateState\/pending","title":"CertificateState.pending","role":"symbol","type":"topic","fragments":[{"kind":"keyword","text":"case"},{"kind":"text","text":" "},{"kind":"identifier","text":"pending"}]},"doc://com.abloy.AbloyMobileSDK/documentation/AbloyCuBeMobileSDK/BackgroundSyncing":{"url":"\/documentation\/abloycubemobilesdk\/backgroundsyncing","role":"article","title":"Background Syncing","type":"topic","abstract":[{"text":"Synchronize and process SDK data in background when the application is not active","type":"text"}],"kind":"article","identifier":"doc:\/\/com.abloy.AbloyMobileSDK\/documentation\/AbloyCuBeMobileSDK\/BackgroundSyncing"},"doc://com.abloy.AbloyMobileSDK/documentation/AbloyCuBeMobileSDK/DiscoveredLock/certificateState":{"type":"topic","title":"certificateState","abstract":[],"url":"\/documentation\/abloycubemobilesdk\/discoveredlock\/certificatestate","fragments":[{"text":"let","kind":"keyword"},{"text":" ","kind":"text"},{"text":"certificateState","kind":"identifier"},{"text":": ","kind":"text"},{"preciseIdentifier":"s:18AbloyCuBeMobileSDK16CertificateStateO","text":"CertificateState","kind":"typeIdentifier"}],"kind":"symbol","identifier":"doc:\/\/com.abloy.AbloyMobileSDK\/documentation\/AbloyCuBeMobileSDK\/DiscoveredLock\/certificateState","role":"symbol"},"doc://com.abloy.AbloyMobileSDK/documentation/AbloyCuBeMobileSDK/DiscoveredLock":{"identifier":"doc:\/\/com.abloy.AbloyMobileSDK\/documentation\/AbloyCuBeMobileSDK\/DiscoveredLock","kind":"symbol","type":"topic","role":"symbol","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"DiscoveredLock"}],"url":"\/documentation\/abloycubemobilesdk\/discoveredlock","navigatorTitle":[{"kind":"identifier","text":"DiscoveredLock"}],"title":"DiscoveredLock","abstract":[{"type":"text","text":"Represents a locking device that is advertising and has been discovered by bluetooth scanning."}]},"doc://com.abloy.AbloyMobileSDK/documentation/AbloyCuBeMobileSDK/LockCertificateEventStreaming/getLockCertificateEvents()":{"title":"getLockCertificateEvents()","abstract":[{"type":"text","text":"Stream of events when lock certificate update is ongoing"}],"type":"topic","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"getLockCertificateEvents"},{"kind":"text","text":"() -> "},{"kind":"typeIdentifier","text":"AsyncStream","preciseIdentifier":"s:ScS"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"LockingDeviceCertificateEvent","preciseIdentifier":"s:18AbloyCuBeMobileSDK29LockingDeviceCertificateEventV"},{"kind":"text","text":">"}],"role":"symbol","kind":"symbol","url":"\/documentation\/abloycubemobilesdk\/lockcertificateeventstreaming\/getlockcertificateevents()","identifier":"doc:\/\/com.abloy.AbloyMobileSDK\/documentation\/AbloyCuBeMobileSDK\/LockCertificateEventStreaming\/getLockCertificateEvents()","required":true},"doc://com.abloy.AbloyMobileSDK/documentation/AbloyCuBeMobileSDK/LockingDeviceCertificateStateChange/certificateUpdateNotSupported":{"role":"symbol","abstract":[{"text":"Locking device model or locking device firmware version does not support certificate updating","type":"text"}],"kind":"symbol","url":"\/documentation\/abloycubemobilesdk\/lockingdevicecertificatestatechange\/certificateupdatenotsupported","identifier":"doc:\/\/com.abloy.AbloyMobileSDK\/documentation\/AbloyCuBeMobileSDK\/LockingDeviceCertificateStateChange\/certificateUpdateNotSupported","fragments":[{"text":"case","kind":"keyword"},{"text":" ","kind":"text"},{"text":"certificateUpdateNotSupported","kind":"identifier"}],"title":"LockingDeviceCertificateStateChange.certificateUpdateNotSupported","type":"topic"},"doc://com.abloy.AbloyMobileSDK/documentation/AbloyCuBeMobileSDK/LockingDeviceCertificateStateChange/requestQueued":{"abstract":[{"text":"Certificate requesting failed due to a network error and requesting is being queued","type":"text"}],"title":"LockingDeviceCertificateStateChange.requestQueued","url":"\/documentation\/abloycubemobilesdk\/lockingdevicecertificatestatechange\/requestqueued","identifier":"doc:\/\/com.abloy.AbloyMobileSDK\/documentation\/AbloyCuBeMobileSDK\/LockingDeviceCertificateStateChange\/requestQueued","kind":"symbol","type":"topic","role":"symbol","fragments":[{"text":"case","kind":"keyword"},{"text":" ","kind":"text"},{"text":"requestQueued","kind":"identifier"}]},"doc://com.abloy.AbloyMobileSDK/documentation/AbloyCuBeMobileSDK/CertificateState/readyForInstall":{"kind":"symbol","abstract":[{"type":"text","text":"Lock certificate is downloaded and will be installed next time the locking device is connected"}],"identifier":"doc:\/\/com.abloy.AbloyMobileSDK\/documentation\/AbloyCuBeMobileSDK\/CertificateState\/readyForInstall","fragments":[{"kind":"keyword","text":"case"},{"kind":"text","text":" "},{"kind":"identifier","text":"readyForInstall"}],"type":"topic","url":"\/documentation\/abloycubemobilesdk\/certificatestate\/readyforinstall","title":"CertificateState.readyForInstall","role":"symbol"},"doc://com.abloy.AbloyMobileSDK/documentation/AbloyCuBeMobileSDK/Connecting":{"url":"\/documentation\/abloycubemobilesdk\/connecting","abstract":[{"type":"text","text":"Connect to and disconnect from a nearby locking device."}],"kind":"article","type":"topic","role":"article","identifier":"doc:\/\/com.abloy.AbloyMobileSDK\/documentation\/AbloyCuBeMobileSDK\/Connecting","title":"Connecting to a Locking Device"},"doc://com.abloy.AbloyMobileSDK/documentation/AbloyCuBeMobileSDK":{"url":"\/documentation\/abloycubemobilesdk","abstract":[{"type":"text","text":"Control Abloy locking devices from within your app."}],"title":"AbloyCuBeMobileSDK","type":"topic","identifier":"doc:\/\/com.abloy.AbloyMobileSDK\/documentation\/AbloyCuBeMobileSDK","role":"collection","kind":"symbol"},"doc://com.abloy.AbloyMobileSDK/documentation/AbloyCuBeMobileSDK/LockingDeviceCertificateEvent":{"url":"\/documentation\/abloycubemobilesdk\/lockingdevicecertificateevent","identifier":"doc:\/\/com.abloy.AbloyMobileSDK\/documentation\/AbloyCuBeMobileSDK\/LockingDeviceCertificateEvent","title":"LockingDeviceCertificateEvent","type":"topic","kind":"symbol","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"LockingDeviceCertificateEvent"}],"navigatorTitle":[{"kind":"identifier","text":"LockingDeviceCertificateEvent"}],"role":"symbol","abstract":[{"type":"text","text":"Locking device certificate update event received by subscribing to "},{"isActive":true,"type":"reference","identifier":"doc:\/\/com.abloy.AbloyMobileSDK\/documentation\/AbloyCuBeMobileSDK\/LockCertificateEventStreaming"}]},"doc://com.abloy.AbloyMobileSDK/documentation/AbloyCuBeMobileSDK/CertificateState/issuing":{"url":"\/documentation\/abloycubemobilesdk\/certificatestate\/issuing","abstract":[{"type":"text","text":"Server is preparing lock certificate"}],"kind":"symbol","identifier":"doc:\/\/com.abloy.AbloyMobileSDK\/documentation\/AbloyCuBeMobileSDK\/CertificateState\/issuing","title":"CertificateState.issuing","role":"symbol","type":"topic","fragments":[{"kind":"keyword","text":"case"},{"kind":"text","text":" "},{"kind":"identifier","text":"issuing"}]},"doc://com.abloy.AbloyMobileSDK/documentation/AbloyCuBeMobileSDK/LockCertificateEventStreaming":{"url":"\/documentation\/abloycubemobilesdk\/lockcertificateeventstreaming","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"LockCertificateEventStreaming"}],"kind":"symbol","title":"LockCertificateEventStreaming","type":"topic","role":"symbol","abstract":[{"text":"Get locking device certificate update events","type":"text"}],"identifier":"doc:\/\/com.abloy.AbloyMobileSDK\/documentation\/AbloyCuBeMobileSDK\/LockCertificateEventStreaming","navigatorTitle":[{"kind":"identifier","text":"LockCertificateEventStreaming"}]}}}