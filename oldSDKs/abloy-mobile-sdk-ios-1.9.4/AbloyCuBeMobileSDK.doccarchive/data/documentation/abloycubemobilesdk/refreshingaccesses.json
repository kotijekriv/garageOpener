{"kind":"article","seeAlsoSections":[{"identifiers":["doc:\/\/com.abloy.AbloyMobileSDK\/documentation\/AbloyCuBeMobileSDK\/AbloyMobileSDK\/fetchAccesses()"],"generated":true,"anchor":"Refreshing-Accesses","title":"Refreshing Accesses"}],"abstract":[{"text":"Fetching and managing accesses.","type":"text"}],"primaryContentSections":[{"content":[{"text":"Overview","type":"heading","level":2,"anchor":"Overview"},{"type":"paragraph","inlineContent":[{"type":"text","text":"In order to operate a locking device, a valid "},{"identifier":"doc:\/\/com.abloy.AbloyMobileSDK\/documentation\/AbloyCuBeMobileSDK\/Access","type":"reference","isActive":true},{"type":"text","text":" is required for it. A valid access is described as a permission to operate a locking device during specific time \/ date range."}]},{"type":"paragraph","inlineContent":[{"text":"The SDK requests accesses from the Abloy Keyless Platform and stores them locally in the mobile device’s database. The accesses are derived from the permissions granted to the user of the operating device.","type":"text"}]},{"type":"aside","style":"tip","name":"Tip","content":[{"inlineContent":[{"type":"text","text":"Read more about permissions from the "},{"isActive":true,"identifier":"https:\/\/api-docs.keyless.assaabloy.com\/administration\/v2#tag\/Permissions","type":"reference"},{"type":"text","text":"."}],"type":"paragraph"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"The accesses contain current and near future permissions for operating locking devices. Successful access fetching from the Keyless Platform replaces old accesses with new ones. If the operating device is not connected to internet, accesses are retrieved from mobile device’s local database."}]},{"type":"aside","style":"important","name":"Important","content":[{"inlineContent":[{"text":"Responsibility and authority of keeping accesses up to date is left for the integrator of the AbloyMobileSDK (For example","type":"text"},{"text":" ","type":"text"},{"identifier":"https:\/\/developer.apple.com\/documentation\/uikit\/uiapplicationdelegate\/1622956-applicationdidbecomeactive","type":"reference","isActive":true},{"text":").","type":"text"}],"type":"paragraph"}]},{"text":"Code Sample","type":"heading","level":2,"anchor":"Code-Sample"},{"tabs":[{"title":"Async context","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"How to call "},{"isActive":true,"type":"reference","identifier":"doc:\/\/com.abloy.AbloyMobileSDK\/documentation\/AbloyCuBeMobileSDK\/AbloyMobileSDK\/fetchAccesses()"},{"type":"text","text":" from asynchronous context"}]},{"type":"codeListing","code":["import AbloyCuBeMobileSDK","","func refreshAccesses() async {","    do {","        switch try await AbloyMobileSDK.shared.fetchAccesses() {","        case .accessFetchedFromBackend(let accesses):","            print(\"Fetched accesses: \\(accesses)\")","        case .accessFetchedFromLocalDatabase(let accesses):","            print(\"Accesses were not fetched, but they were loaded from database: \\(accesses)\")","        }","    } catch let error as AccessFetchingFailure {","        print(error.reason)","    } catch {","        print(\"Fetching failed: \\(error)\")","    }","}"],"syntax":"swift"}]},{"title":"Synchronous context","content":[{"inlineContent":[{"text":"How to call ","type":"text"},{"identifier":"doc:\/\/com.abloy.AbloyMobileSDK\/documentation\/AbloyCuBeMobileSDK\/AbloyMobileSDK\/fetchAccesses()","isActive":true,"type":"reference"},{"text":" from synchronous context","type":"text"}],"type":"paragraph"},{"syntax":"swift","code":["import AbloyCuBeMobileSDK","","func refreshAccesses() {","    Task {","        do {","            switch try await AbloyMobileSDK.shared.fetchAccesses() {","            case .accessFetchedFromBackend(let accesses):","                print(\"Fetched accesses: \\(accesses)\")","            case .accessFetchedFromLocalDatabase(let accesses):","                print(\"Accesses were not fetched, but they were loaded from database: \\(accesses)\")","            }","        } catch let error as AccessFetchingFailure {","            print(error.reason)","        } catch {","            print(\"Fetching failed: \\(error)\")","        }","    }","}"],"type":"codeListing"}]}],"type":"tabNavigator"},{"text":"Further Reading","type":"heading","level":2,"anchor":"Further-Reading"},{"type":"links","style":"list","items":["doc:\/\/com.abloy.AbloyMobileSDK\/documentation\/AbloyCuBeMobileSDK\/Scanning","doc:\/\/com.abloy.AbloyMobileSDK\/documentation\/AbloyCuBeMobileSDK\/Connecting"]}],"kind":"content"}],"metadata":{"title":"Refreshing Accesses","modules":[{"name":"AbloyCuBeMobileSDK"}],"roleHeading":"Article","role":"article"},"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/abloycubemobilesdk\/refreshingaccesses"]}],"hierarchy":{"paths":[["doc:\/\/com.abloy.AbloyMobileSDK\/documentation\/AbloyCuBeMobileSDK"]]},"identifier":{"url":"doc:\/\/com.abloy.AbloyMobileSDK\/documentation\/AbloyCuBeMobileSDK\/RefreshingAccesses","interfaceLanguage":"swift"},"sections":[],"schemaVersion":{"major":0,"patch":0,"minor":3},"references":{"doc://com.abloy.AbloyMobileSDK/documentation/AbloyCuBeMobileSDK/Access":{"fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"Access"}],"kind":"symbol","navigatorTitle":[{"kind":"identifier","text":"Access"}],"type":"topic","abstract":[],"role":"symbol","url":"\/documentation\/abloycubemobilesdk\/access","title":"Access","identifier":"doc:\/\/com.abloy.AbloyMobileSDK\/documentation\/AbloyCuBeMobileSDK\/Access"},"https://developer.apple.com/documentation/uikit/uiapplicationdelegate/1622956-applicationdidbecomeactive":{"titleInlineContent":[{"type":"text","text":"when the application becomes active"}],"identifier":"https:\/\/developer.apple.com\/documentation\/uikit\/uiapplicationdelegate\/1622956-applicationdidbecomeactive","url":"https:\/\/developer.apple.com\/documentation\/uikit\/uiapplicationdelegate\/1622956-applicationdidbecomeactive","type":"link","title":"when the application becomes active"},"doc://com.abloy.AbloyMobileSDK/documentation/AbloyCuBeMobileSDK/Connecting":{"url":"\/documentation\/abloycubemobilesdk\/connecting","title":"Connecting to a Locking Device","type":"topic","role":"article","abstract":[{"text":"Connect to and disconnect from a nearby locking device.","type":"text"}],"kind":"article","identifier":"doc:\/\/com.abloy.AbloyMobileSDK\/documentation\/AbloyCuBeMobileSDK\/Connecting"},"https://api-docs.keyless.assaabloy.com/administration/v2#tag/Permissions":{"title":"Abloy Keyless Platform Administration API documentation","identifier":"https:\/\/api-docs.keyless.assaabloy.com\/administration\/v2#tag\/Permissions","titleInlineContent":[{"type":"text","text":"Abloy Keyless Platform Administration API documentation"}],"type":"link","url":"https:\/\/api-docs.keyless.assaabloy.com\/administration\/v2#tag\/Permissions"},"doc://com.abloy.AbloyMobileSDK/documentation/AbloyCuBeMobileSDK/Scanning":{"type":"topic","abstract":[{"text":"Scan for nearby locking devices that are advertising.","type":"text"}],"role":"article","title":"Scanning for Locking Devices","identifier":"doc:\/\/com.abloy.AbloyMobileSDK\/documentation\/AbloyCuBeMobileSDK\/Scanning","url":"\/documentation\/abloycubemobilesdk\/scanning","kind":"article"},"doc://com.abloy.AbloyMobileSDK/documentation/AbloyCuBeMobileSDK":{"abstract":[{"text":"Control Abloy locking devices from within your app.","type":"text"}],"type":"topic","kind":"symbol","url":"\/documentation\/abloycubemobilesdk","identifier":"doc:\/\/com.abloy.AbloyMobileSDK\/documentation\/AbloyCuBeMobileSDK","role":"collection","title":"AbloyCuBeMobileSDK"},"doc://com.abloy.AbloyMobileSDK/documentation/AbloyCuBeMobileSDK/AbloyMobileSDK/fetchAccesses()":{"role":"symbol","url":"\/documentation\/abloycubemobilesdk\/abloymobilesdk\/fetchaccesses()","fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"fetchAccesses","kind":"identifier"},{"text":"() ","kind":"text"},{"text":"async","kind":"keyword"},{"text":" ","kind":"text"},{"text":"throws","kind":"keyword"},{"text":" -> ","kind":"text"},{"text":"AccessResult","kind":"typeIdentifier","preciseIdentifier":"s:18AbloyCuBeMobileSDK12AccessResultO"}],"identifier":"doc:\/\/com.abloy.AbloyMobileSDK\/documentation\/AbloyCuBeMobileSDK\/AbloyMobileSDK\/fetchAccesses()","kind":"symbol","abstract":[{"type":"text","text":"Fetch the client’s access from the system."}],"type":"topic","title":"fetchAccesses()"}}}