{"metadata":{"title":"Background Syncing","roleHeading":"Article","modules":[{"name":"AbloyCuBeMobileSDK"}],"role":"article"},"seeAlsoSections":[{"anchor":"Background-Syncing","title":"Background Syncing","identifiers":["doc:\/\/com.abloy.AbloyMobileSDK\/documentation\/AbloyCuBeMobileSDK\/AbloyMobileSDK\/enableBackgroundSync()"],"generated":true}],"primaryContentSections":[{"kind":"content","content":[{"text":"Overview","anchor":"Overview","level":2,"type":"heading"},{"inlineContent":[{"type":"text","text":"AbloyCuBeMobileSDK uses "},{"identifier":"https:\/\/developer.apple.com\/documentation\/backgroundtasks","type":"reference","isActive":true},{"type":"text","text":" to perform certain"},{"type":"text","text":" "},{"type":"text","text":"operations in background to keep SDK content up to date. For example, if a network request fails, SDK schedules the"},{"type":"text","text":" "},{"type":"text","text":"failed request and tries to execute it later when app is not active."},{"type":"text","text":" "},{"type":"text","text":"It is recommended to enable background syncing to improve SDK performance."}],"type":"paragraph"},{"name":"Important","content":[{"inlineContent":[{"text":"","type":"text"},{"text":" ","type":"text"},{"text":"In order to execute background processes, following conditions should be met:","type":"text"}],"type":"paragraph"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"An active internet connection.","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"code":"BackgroundAppRefresh","type":"codeVoice"},{"text":" should be enabled in phone settings.","type":"text"}]}]}]}],"style":"important","type":"aside"},{"name":"Important","content":[{"inlineContent":[{"text":"","type":"text"},{"text":" ","type":"text"},{"text":"OS maintains how the background processes are executed. There is no fixed schedule of running these processes. It is","type":"text"},{"text":" ","type":"text"},{"text":"possible that processes do not run at all if system doesn’t allow it.","type":"text"}],"type":"paragraph"}],"style":"important","type":"aside"},{"text":"How to enable background syncing","anchor":"How-to-enable-background-syncing","level":3,"type":"heading"},{"items":[{"content":[{"inlineContent":[{"text":"In Signing & Capabilities tab of app’s target, add Background Modes capability and select Background processing mode.","type":"text"}],"type":"paragraph"}]}],"type":"orderedList"},{"inlineContent":[{"type":"image","identifier":"BackgroundModes.png"}],"type":"paragraph"},{"start":2,"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Add ","type":"text"},{"isActive":true,"identifier":"https:\/\/developer.apple.com\/documentation\/bundleresources\/information_property_list\/bgtaskschedulerpermittedidentifiers","type":"reference"},{"text":" in app’s info.plist file and add task identifier.","type":"text"},{"text":" ","type":"text"},{"text":"Your info.plist should look like this:","type":"text"}]}]}],"type":"orderedList"},{"inlineContent":[{"type":"image","identifier":"BackgroundModesInfoPlist.png"}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"Following task identifier must be used to register background task:"}],"type":"paragraph"},{"code":["com.abloy.AbloyMobileSDK.keyless-sync"],"syntax":null,"type":"codeListing"},{"start":3,"items":[{"content":[{"inlineContent":[{"type":"text","text":"Background syncing must be enabled before the app finishes launching. For example, "},{"isActive":true,"type":"reference","identifier":"doc:\/\/com.abloy.AbloyMobileSDK\/documentation\/AbloyCuBeMobileSDK\/AbloyMobileSDK\/enableBackgroundSync()"},{"type":"text","text":" should be called in app’s AppDelegate"},{"type":"text","text":" "},{"isActive":true,"type":"reference","identifier":"https:\/\/developer.apple.com\/documentation\/uikit\/uiapplicationdelegate\/1622921-application"},{"type":"text","text":" method."},{"type":"text","text":" "},{"type":"text","text":"Enabling background syncing will fail if called after app startup is finished."}],"type":"paragraph"}]}],"type":"orderedList"},{"code":["import AbloyCuBeMobileSDK","","func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]? = nil) -> Bool {","    let isRegistered = AbloyMobileSDK.shared.enableBackgroundSync()","    print(\"Task registered successfully\", isRegistered)","    return true","}"],"syntax":"swift","type":"codeListing"},{"anchor":"Further-Reading","level":2,"type":"heading","text":"Further Reading"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"identifier":"https:\/\/developer.apple.com\/documentation\/uikit\/app_and_environment\/scenes\/preparing_your_ui_to_run_in_the_background\/using_background_tasks_to_update_your_app","isActive":true,"type":"reference"}]}]}]}]}],"sections":[],"hierarchy":{"paths":[["doc:\/\/com.abloy.AbloyMobileSDK\/documentation\/AbloyCuBeMobileSDK"]]},"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/com.abloy.AbloyMobileSDK\/documentation\/AbloyCuBeMobileSDK\/BackgroundSyncing"},"kind":"article","variants":[{"paths":["\/documentation\/abloycubemobilesdk\/backgroundsyncing"],"traits":[{"interfaceLanguage":"swift"}]}],"schemaVersion":{"patch":0,"major":0,"minor":3},"abstract":[{"type":"text","text":"Synchronize and process SDK data in background when the application is not active"}],"references":{"BackgroundModesInfoPlist.png":{"type":"image","identifier":"BackgroundModesInfoPlist.png","variants":[{"traits":["1x","light"],"url":"\/images\/com.abloy.AbloyMobileSDK\/BackgroundModesInfoPlist.png"}],"alt":"BackgroundModesInfoPlist"},"doc://com.abloy.AbloyMobileSDK/documentation/AbloyCuBeMobileSDK":{"abstract":[{"text":"Control Abloy locking devices from within your app.","type":"text"}],"type":"topic","kind":"symbol","url":"\/documentation\/abloycubemobilesdk","identifier":"doc:\/\/com.abloy.AbloyMobileSDK\/documentation\/AbloyCuBeMobileSDK","role":"collection","title":"AbloyCuBeMobileSDK"},"doc://com.abloy.AbloyMobileSDK/documentation/AbloyCuBeMobileSDK/AbloyMobileSDK/enableBackgroundSync()":{"fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"enableBackgroundSync","kind":"identifier"},{"text":"() -> ","kind":"text"},{"text":"Bool","preciseIdentifier":"s:Sb","kind":"typeIdentifier"}],"type":"topic","role":"symbol","abstract":[{"type":"text","text":"Registers and schedules a background process to keep SDK content up to date"}],"url":"\/documentation\/abloycubemobilesdk\/abloymobilesdk\/enablebackgroundsync()","kind":"symbol","title":"enableBackgroundSync()","identifier":"doc:\/\/com.abloy.AbloyMobileSDK\/documentation\/AbloyCuBeMobileSDK\/AbloyMobileSDK\/enableBackgroundSync()"},"https://developer.apple.com/documentation/bundleresources/information_property_list/bgtaskschedulerpermittedidentifiers":{"titleInlineContent":[{"type":"text","text":"BGTaskSchedulerPermittedIdentifiers"}],"title":"BGTaskSchedulerPermittedIdentifiers","type":"link","url":"https:\/\/developer.apple.com\/documentation\/bundleresources\/information_property_list\/bgtaskschedulerpermittedidentifiers","identifier":"https:\/\/developer.apple.com\/documentation\/bundleresources\/information_property_list\/bgtaskschedulerpermittedidentifiers"},"BackgroundModes.png":{"type":"image","identifier":"BackgroundModes.png","variants":[{"traits":["1x","light"],"url":"\/images\/com.abloy.AbloyMobileSDK\/BackgroundModes.png"}],"alt":"BackgroundModes"},"https://developer.apple.com/documentation/backgroundtasks":{"titleInlineContent":[{"type":"text","text":"BackgroundTasks"}],"title":"BackgroundTasks","type":"link","url":"https:\/\/developer.apple.com\/documentation\/backgroundtasks","identifier":"https:\/\/developer.apple.com\/documentation\/backgroundtasks"},"https://developer.apple.com/documentation/uikit/uiapplicationdelegate/1622921-application":{"type":"link","identifier":"https:\/\/developer.apple.com\/documentation\/uikit\/uiapplicationdelegate\/1622921-application","title":"(_:didFinishLaunchingWithOptions:)","titleInlineContent":[{"type":"text","text":"(_:didFinishLaunchingWithOptions:)"}],"url":"https:\/\/developer.apple.com\/documentation\/uikit\/uiapplicationdelegate\/1622921-application"},"https://developer.apple.com/documentation/uikit/app_and_environment/scenes/preparing_your_ui_to_run_in_the_background/using_background_tasks_to_update_your_app":{"titleInlineContent":[{"type":"text","text":"Using background tasks to update your app"}],"title":"Using background tasks to update your app","type":"link","url":"https:\/\/developer.apple.com\/documentation\/uikit\/app_and_environment\/scenes\/preparing_your_ui_to_run_in_the_background\/using_background_tasks_to_update_your_app","identifier":"https:\/\/developer.apple.com\/documentation\/uikit\/app_and_environment\/scenes\/preparing_your_ui_to_run_in_the_background\/using_background_tasks_to_update_your_app"}}}